(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{77:function(e,t,n){"use strict";n.r(t);var r,i,c,a,o,s,l,u,d,p,b,j,x,h,O,f,g,m,v=n(0),y=n(24),w=n.n(y),k=n(3),_=n(4),E=_.b.header(r||(r=Object(k.a)(["\n    position: fixed;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    width: 100%;\n    padding: 0px 65px;\n    height: 80px;\n    backdrop-filter: blur(20px);\n    background:linear-gradient(to right bottom, rgba(255,255, 255, 0.3), rgba(255, 255, 255, 0.2));\n    z-index: 500;\n  \n"]))),C=_.b.div(i||(i=Object(k.a)(["\n    position: relative;\n    width: 75px;\n    height: 75px;\n    padding: 15px;\n    color: #4284E3;\n    &:hover {\n        background: linear-gradient(to right bottom, rgba(255, 255, 255, 0.8), rgba(255, 255, 255, 0.3));\n        border-radius: 50px;\n        cursor: pointer;\n    }\n"]))),T=_.b.div(c||(c=Object(k.a)(["\n    position: absolute;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 20px;\n    height: 20px;\n    top: 10px;\n    right: 7px;\n    background: linear-gradient(to right bottom, rgba(255, 255, 255, .7), rgba(255, 255, 255, .7));  \n    border-radius: 20px;\n    font-weight: bold;\n    border: 2px solid white;\n    border-radius: 20px;\n"]))),R=_.b.img(a||(a=Object(k.a)(["\n    width: 100%;\n    heigth: 100%;\n"]))),S=_.b.div(o||(o=Object(k.a)(["\n    color: #4284E3;\n    font-size: 45px;\n"]))),I=Object(_.a)(s||(s=Object(k.a)(["\n    * {\n        box-sizing: border-box;\n        margin: 0;\n        padding: 0;\n        font-family: 'Open Sans', sans-serif;\n    }\n    a {\n        text-decoration: none;\n        color: #000;\n    }\n    input::-webkit-outer-spin-button,\n    input::-webkit-inner-spin-button {\n    -webkit-appearance: none;\n}\n"]))),D=_.b.div(l||(l=Object(k.a)(["\n    width: 1200px;\n    height: 800px;\n    padding: 25px;\n    display: flex;\n    flex-direction: column;\n    background: linear-gradient(to right bottom, rgba(255, 255, 255, 0.6), rgba(255, 255, 255, 0.3));\n    backdrop-filter: blur(20px);\n    border: 2px solid white;\n    border-radius: 40px;\n    z-index: 499;\n   \n"]))),A=_.b.div(u||(u=Object(k.a)(["\n    padding-top: 80px;\n    min-height: 100vh;\n    position: relative;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    background: linear-gradient(252.62deg, #49FDC7 -0.81%, #4284E3 99.99%, #56C9FA 100%);\n    overflow: hidden;\n    &::before {\n      content: '';\n      position: absolute;\n      width: 400px;\n      height: 350px;\n      background: linear-gradient(to right bottom, rgba(255, 255, 255, 0.8), rgba(255, 255, 255, 0.3));  \n      border-radius: 100%;\n      bottom: -75px;\n      left: -75px;\n    }\n    &::after {\n       content: '';\n       position: absolute;\n       width: 550px;\n       height: 500px;\n       background: linear-gradient(to right bottom, rgba(255, 255, 255, 0.8), rgba(255, 255, 255, 0.3)); \n       border-radius: 100%;\n       top: -150px;\n       right: -150px;\n    }\n"]))),U=_.b.button(d||(d=Object(k.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 100px;\n    height: 40px;\n    border: 1px solid #fff;\n    background-color: transparent;\n    border-radius: 10px;\n    padding: 10px;\n    outline: none;\n    &:hover {\n        cursor: pointer;\n        background-color: #fff;\n    }\n"]))),P=_.b.div(p||(p=Object(k.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    width: 100px;\n    height: 40px;\n    border: 1px solid #fff;\n    background-color: transparent;\n    border-radius: 10px;\n    padding: 10px;\n    outline: none;\n    color: black;\n    text-align: center;\n    &:hover {\n        cursor: pointer;\n        background-color: #fff;\n    }\n"]))),L=_.b.h1(b||(b=Object(k.a)(["\n    margin: 25px 0px;\n"]))),F=Object(_.c)(j||(j=Object(k.a)(["  \nfrom { opacity: 0; }\nto { opacity: 1; }\n"]))),M=n.p+"static/media/shopping-cart.a31e0f2d.svg",H=n(7),q=H.c,N=n(9),z=n.p+"static/media/user.22929810.svg",V=n(10),K=n(12),B=n.n(K),G=function(e,t){var n=Object(v.useRef)();return Object(v.useCallback)((function(r){n.current&&clearTimeout(n.current),n.current=setTimeout((function(){return e(r)}),t)}),[e,t])},W=function(){var e=Object(v.useState)(!1),t=Object(V.a)(e,2),n=t[0],r=t[1],i=Object(v.useRef)(null);return Object(v.useEffect)((function(){var e=function(e){e.path.includes(i.current)||r(!1)};return n&&window.addEventListener("click",(function(t){return e(t)})),function(){window.removeEventListener("click",e)}}),[n]),{setVisible:r,visible:n,ref:i}},Q=n.p+"static/media/search.97985126.svg",J=_.b.div(x||(x=Object(k.a)(['\n    width: 50%;\n    position: relative;\n        &:before {\n            content: "";\n            position: absolute;\n            width: 30px;\n            height: 30px;\n            top: 50%;\n            right:0;\n            transform: translateY(-50%);\n            background: url(',") no-repeat center;\n            &:hover {\n                transform: scale(1.1)\n            }\n        }\n"])),Q),X=_.b.input(h||(h=Object(k.a)(["\n    height: 34px;\n    width: 100%;\n    color: #333;\n    background: #eaeaea;\n    padding: 0 50px 0 12px;\n    border-radius: 8px;\n    border: none;\n"]))),Y=_.b.div(O||(O=Object(k.a)(["\n    position: absolute;\n    z-index: 999;\n    width: 35%;\n    animation: "," .3s;\n    ul {\n        list-style: none;\n        li {\n            padding: 0px 10px;\n            border: 1px solid lightgrey;\n            height: 50px;\n            background-color: #fff;\n            border-radius: 5px;\n            display: flex;\n            align-items: center;\n            justify-content: space-between;\n            cursor: pointer;\n        }\n    }\n    img {\n        width: 70px;\n        height: 50px;\n    }\n"])),F),$=n(5),Z=n(1),ee=function(e){var t=e.visible,n=e.data,r=e.setVisible,i=e.setQuery,c=e.popupRef,a=Object($.g)();return t?Object(Z.jsx)(Y,{ref:c,children:Object(Z.jsx)("ul",{children:n.length?n.slice(0,5).map((function(e){return Object(Z.jsxs)("li",{onClick:function(t){return function(e,t){a.push("/products/"+t._id),r(!1),i("")}(0,e)},children:[Object(Z.jsx)("img",{src:"http://localhost:5000/"+e.image,alt:"img"}),e.name]},e._id)})):Object(Z.jsx)("li",{children:"\u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"})})}):null},te=function(){var e=Object(v.useState)(""),t=Object(V.a)(e,2),n=t[0],r=t[1],i=Object(v.useState)([]),c=Object(V.a)(i,2),a=c[0],o=c[1],s=W(),l=s.visible,u=s.setVisible,d=s.ref,p=G((function(e){B.a.get("http://localhost:5000/api/products/search?query=".concat(e)).then((function(e){var t=e.data;o(t),u(!0)}))}),1e3);return Object(Z.jsxs)(J,{children:[Object(Z.jsx)(X,{value:n,onChange:function(e){r(e.target.value),p(e.target.value)},placeholder:"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u0441\u0430\u0439\u0442\u0443",type:"text"}),Object(Z.jsx)(ee,{popupRef:d,setQuery:r,setVisible:u,data:a,visible:l})]})},ne=n.p+"static/media/arrow-down-sign-to-navigate.600ee40a.svg",re=_.b.div(f||(f=Object(k.a)(["\n    user-select:none;\n    display: flex;\n    align-items: center;\n    height: 100%;\n    position:relative;\n    padding: 0px 20px 0px 3px;\n    img {\n        width: 30px;\n        height:30px;\n    }\n    span {\n        margin-left: 5px;\n    }\n    &:hover {\n        background-color: rgba(0, 0, 0, 0.1);\n        cursor: pointer;\n    }\n    &::after {\n        content: '';\n        position: absolute;\n        height: 10px;\n        width: 10px;\n        right: 5px;\n        background: url(",") no-repeat center center;\n    }\n"])),ne),ie=_.b.div(g||(g=Object(k.a)(["\n    width: 100%;\n    position: absolute;\n    top: 80px;\n    transform: translateX(-50%);\n    min-width: 200px;\n    animation: "," .3s;\n    ul {\n        background-color: #fff;\n        list-style: none;\n        border-radius: 5px;\n        li {\n            padding: 0px 10px;\n            height: 50px;\n            display: flex;\n            align-items: center;\n            cursor: pointer;\n            &:hover {\n                background-color: rgba(128,128,128, 0.1)\n            }\n        }\n    }\n"])),F),ce=n(8),ae=n.n(ce),oe=n(16);!function(e){e.SET_USER="SET_USER",e.LOGOUT="LOGOUT"}(m||(m={}));var se,le,ue,de,pe,be,je,xe,he,Oe,fe,ge,me=function(e){return{type:m.SET_USER,payload:e}},ve=function(e){return function(){var t=Object(oe.a)(ae.a.mark((function t(n){var r,i;return ae.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,B.a.post("http://localhost:5000/api/auth/register",e);case 3:r=t.sent,i=r.data,localStorage.setItem("access_token",i.access_token),n(me(i.user)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),alert(t.t0.response.data.message);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()},ye=function(){var e=Object(H.b)(),t=Object($.g)();return Object(Z.jsx)(ie,{children:Object(Z.jsxs)("ul",{children:[Object(Z.jsx)("li",{onClick:function(){return t.push("/profile")},children:"Profile"}),Object(Z.jsx)("li",{onClick:function(){return e({type:m.LOGOUT})},children:"Logout"})]})})},we=function(){var e=q((function(e){return e.cart})).items,t=q((function(e){return e.auth})),n=t.isAuth,r=t.currentUser,i=W(),c=i.visible,a=i.setVisible,o=i.ref;return Object(Z.jsxs)(E,{children:[Object(Z.jsx)(S,{children:"E-commerce"}),Object(Z.jsx)(te,{}),n&&r?Object(Z.jsxs)(re,{ref:o,onClick:function(){a(!c)},children:[Object(Z.jsx)("img",{src:z,alt:"userIcon"}),Object(Z.jsx)("span",{children:r.username}),c&&Object(Z.jsx)(ye,{})]}):Object(Z.jsx)(N.b,{to:"/login",children:Object(Z.jsx)(P,{children:"\u0412\u043e\u0439\u0442\u0438"})}),Object(Z.jsx)(N.b,{to:"/cart",children:Object(Z.jsxs)(C,{children:[Object(Z.jsx)(R,{src:M,alt:"shop-cart"}),Object(Z.jsx)(T,{children:e.reduce((function(e,t){return e+t.count}),0)})]})})]})},ke=_.b.div(se||(se=Object(k.a)(["\n    width: 400px;\n    height: 800px;\n    background: linear-gradient(to right bottom, rgba(255, 255, 255, 0.6), rgba(255, 255, 255, 0.3));\n    margin-right: 80px;\n    backdrop-filter: blur(20px);\n    border: 2px solid white;\n    border-radius: 40px;\n    padding: 25px 0px;\n    ul {\n        list-style: none;\n        text-align: center;\n        li {\n            color: #4284E3;\n            font-size: 55px;\n            &:hover {\n                background-color: rgba(255,255,255, .3);\n                cursor: pointer;\n            }\n        }\n    }\n"]))),_e=function(){return Object(Z.jsx)(ke,{children:Object(Z.jsx)("nav",{children:Object(Z.jsxs)("ul",{children:[Object(Z.jsx)(N.b,{to:"/",children:Object(Z.jsx)("li",{children:"Home"})}),Object(Z.jsx)(N.b,{to:"/products",children:Object(Z.jsx)("li",{children:"Products"})}),Object(Z.jsx)(N.b,{to:"/cart",children:Object(Z.jsx)("li",{children:"Cart"})})]})})})},Ee=n(2),Ce=function(e){var t=Object(v.useState)(e),n=Object(V.a)(t,2),r=n[0],i=n[1];return{value:r,onChange:function(e){i(e.target.value)}}},Te=_.b.div(le||(le=Object(k.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    flex-direction: column;\n    height: 100%;\n    h1 {\n        margin-bottom: 15px;\n    }\n"]))),Re=_.b.form(ue||(ue=Object(k.a)(["\n    padding: 20px;\n    display: flex;\n    flex-direction: column;\n    text-align: center;\n    min-height: 350px;\n    border: 2px solid #fff;\n    label {\n        margin-bottom: 5px;\n    }\n    input {\n        padding: 10px;\n        background-color: transparent;\n        border: 2px solid #fff;\n        border-radius: 10px;\n        font-size: 18px; \n        margin-bottom: 10px;\n    }\n    input[type='submit'] {\n        cursor: pointer;\n        margin-top: auto;\n    }\n\n"]))),Se=function(){var e=Ce(""),t=Ce(""),n=Object(H.b)();return q((function(e){return e.auth})).isAuth?Object(Z.jsx)($.a,{to:"/"}):Object(Z.jsxs)(Te,{children:[Object(Z.jsx)("h1",{children:"Login"}),Object(Z.jsxs)(Re,{onSubmit:function(r){if(r.preventDefault(),e.value&&t.value){var i={email:e.value,password:t.value};n(function(e){return function(){var t=Object(oe.a)(ae.a.mark((function t(n){var r,i;return ae.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,B.a.post("http://localhost:5000/api/auth/login",e);case 3:r=t.sent,i=r.data,localStorage.setItem("access_token",i.access_token),n(me(i.user)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),alert(t.t0.response.data.message);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}(i))}else alert("all fields are required")},children:[Object(Z.jsx)("label",{htmlFor:"email",children:"Email"}),Object(Z.jsx)("input",Object(Ee.a)(Object(Ee.a)({},e),{},{name:"email",id:"email",type:"text"})),Object(Z.jsx)("label",{htmlFor:"password",children:"Password"}),Object(Z.jsx)("input",Object(Ee.a)(Object(Ee.a)({},t),{},{name:"password",id:"password",type:"text"})),Object(Z.jsx)("input",{type:"submit",value:"log in"})]}),Object(Z.jsxs)("span",{children:["don`t have an account ",Object(Z.jsx)(N.b,{style:{color:"navy"},to:"/register",children:"Register"})]})]})},Ie=function(){return Object(Z.jsx)("div",{children:"Home"})},De=_.b.div(de||(de=Object(k.a)(["\n    display: flex;\n    flex-direction: column;\n    height: 100%;\n"]))),Ae=_.b.div(pe||(pe=Object(k.a)(["\n    margin-bottom: 20px;\n    width: 95%;\n    height: 125px;\n    background-color: rgba(119, 136, 153, .5);\n    display: flex;\n    justify-content:space-between;\n    align-items: center;\n    padding: 10px;\n    border-radius: 10px;\n"]))),Ue=_.b.div(be||(be=Object(k.a)(["\n    margin-top: auto;\n    display: flex;\n    justify-content: space-between;\n"]))),Pe=_.b.input(je||(je=Object(k.a)(["\n    width: 55px;\n    height: 35px;\n    outline: none;\n    text-align: center;\n    margin: 0 5px;\n    border: 2px solid rgba(119, 136, 153, 1)\n"]))),Le=Object(_.b)(U)(xe||(xe=Object(k.a)(["\n    width: 15px;\n    height: 15px;\n"]))),Fe=Object(_.b)(U)(he||(he=Object(k.a)(["\n    width: 15px;\n    height: 15px;\n    font-weight: bold;\n"]))),Me=_.b.div(Oe||(Oe=Object(k.a)(["\n    display: flex;\n    flex-wrap: wrap;\n    overflow-y: auto;\n    margin-bottom: 10px;\n"]))),He=_.b.div(fe||(fe=Object(k.a)(["\n    max-width: 135px;\n    height: 100%;\n    img {\n    width: 100%;\n    height: 100%\n    }\n"])));function qe(e){return{type:ge.ADD_TO_CART,payload:e}}function Ne(e,t){return{type:ge.HANDLE_AMOUNT_COUNT,payload:{item:e,amount:t}}}!function(e){e.ADD_TO_CART="ADD_TO_CART",e.HANDLE_AMOUNT_COUNT="HANDLE_AMOUNT_COUNT",e.DELETE_FROM_CART="DELETE_FROM_CART"}(ge||(ge={}));var ze,Ve,Ke,Be,Ge,We,Qe,Je,Xe=function(e){var t=e.item,n=Object(H.b)(),r=Object(v.useRef)(1);return Object(Z.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(Z.jsx)(Le,{onClick:function(){r.current<t.quantity&&(n(Ne(t,r.current+1)),r.current++)},children:"+"}),Object(Z.jsx)(Pe,{value:t.count,onChange:function(e){+e.target.value<=t.quantity&&(r.current=+e.target.value,n(Ne(t,+e.target.value)))},type:"number"}),Object(Z.jsx)(Fe,{onClick:function(){1!==r.current&&(n(Ne(t,r.current-1)),r.current--)},children:"\u2013"})]})},Ye=function(e){var t=e.item,n=Object(H.b)();return Object(Z.jsxs)(Ae,{children:[Object(Z.jsx)(He,{children:Object(Z.jsx)("img",{src:"http://localhost:5000/"+t.image,alt:"img"})}),Object(Z.jsx)("div",{children:t.name}),Object(Z.jsx)(Xe,{item:t}),Object(Z.jsxs)("div",{style:{width:"100px"},children:[t.totalItemPrice," $"]}),Object(Z.jsx)(U,{onClick:function(e){e.stopPropagation(),n(function(e){return{type:ge.DELETE_FROM_CART,payload:e}}(t))},style:{width:"35px",height:"35px"},children:"\u2715"})]})},$e=n.p+"static/media/basket.5b3fee03.svg",Ze=function(){var e=q((function(e){return e.cart})),t=e.items,n=e.totalCartPrice;return t.length?Object(Z.jsxs)(De,{children:[Object(Z.jsx)(L,{children:"Shopping Cart"}),Object(Z.jsx)(Me,{children:t.map((function(e){return Object(Z.jsx)(Ye,{item:e},e._id)}))}),Object(Z.jsxs)(Ue,{children:[Object(Z.jsx)(N.b,{to:"/products",children:Object(Z.jsx)(P,{children:"back to shopping"})}),Object(Z.jsxs)("h2",{children:["Total: ",n]})]})]}):Object(Z.jsxs)("div",{style:{width:"100%",height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[Object(Z.jsx)("h1",{children:"Cart is empty \ud83d\ude22"}),Object(Z.jsx)("img",{src:$e,alt:"emptyCart"}),Object(Z.jsx)(N.b,{to:"/products",children:Object(Z.jsx)(P,{style:{width:"200px",height:"70px",fontSize:"22px"},children:"back to shopping"})})]})},et=_.b.div(ze||(ze=Object(k.a)(["\n    display: flex;\n    flex-wrap: wrap;\n    height: 100%;\n"]))),tt=_.b.div(Ve||(Ve=Object(k.a)(["\n    display: flex;\n    flex-direction:column;\n    align-items: center;\n    margin: 0px 15px 15px 0px;\n    max-height: 350px;\n    background-color: rgba(255, 255, 255, .4);\n    flex: 0 1 calc(25% - 15px);\n    border-radius: 10px;\n    box-shadow: 0px -1px 9px 3px rgba(34, 60, 80, 0.2);\n    cursor: pointer;\n    &:hover {\n        transform: scale(1.03)\n    }\n    span {\n        font-size: 13px;\n        color: #333;\n    }\n"]))),nt=_.b.div(Ke||(Ke=Object(k.a)(["\n    display: flex;\n    justify-content: space-between;\n    width: 100%;\n    padding: 0px 15px;\n    margin-top: auto;\n    margin-bottom: 5px;\n"]))),rt=(_.b.div(Be||(Be=Object(k.a)(["\n\n"]))),_.b.div(Ge||(Ge=Object(k.a)(["\n    max-width: 150px;\n    max-height: 120px;\n        img {\n        width: 100%;\n        height: 100%\n        }\n"])))),it=_.b.div(We||(We=Object(k.a)(["\n    width: 35px;\n    height: 35px;\n    display: flex;\n    align-items: center;\n    img {\n        background-color: ",";\n        border-radius: 10px;\n        &:hover { \n            background-color: #fff;\n            cursor: pointer;\n        }\n        width: 100%;\n        height: 100%;\n    }\n\n"])),(function(e){return e.active?"red":null})),ct=_.b.div(Qe||(Qe=Object(k.a)(["\n    width: 40px;\n    height: 40px;\n    display: flex;\n    align-items: center;\n    &:hover { \n        background-color: #fff;\n        border-radius: 10px;\n        cursor: pointer;\n    }\n    img {\n        width: 100%;\n        height: 100%;\n    }\n"]))),at=n(21);!function(e){e.FETCH_PRODUCTS="FETCH_PRODUCTS",e.FETCH_ERROR="FETCH_ERROR",e.FETCH_SUCCESS="FETCH_SUCCESS",e.SET_LIKE="SET_LIKE",e.REMOVE_LIKE="REMOVE_LIKE",e.ADD_COMMENT="ADD_COMMENT"}(Je||(Je={}));var ot,st,lt,ut,dt=n(46),pt=function(){return Object(Z.jsx)(dt.a,{speed:2,width:271,height:343,viewBox:"0 0 271 343",backgroundColor:"#e3e7e8",foregroundColor:"#ecebeb",children:Object(Z.jsx)("rect",{x:"4",y:"5",rx:"15",ry:"15",width:"271",height:"343"})})},bt=n.p+"static/media/heart.b557dc02.svg",jt=n.p+"static/media/free-icon-add-cart-967506.dbd4a4bd.svg",xt=function(e){var t=e.product,n=Object(H.b)(),r=Object($.g)(),i=q((function(e){return e.cart})).items,c=q((function(e){return e.auth})).currentUser;return Object(Z.jsxs)(tt,{onClick:function(){return r.push("products/"+t._id)},children:[Object(Z.jsx)(rt,{style:{margin:"20px 0px"},children:Object(Z.jsx)("img",{src:"http://localhost:5000/"+t.image,alt:"image"})}),Object(Z.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(Z.jsxs)("span",{style:{color:"navy"},children:["Name - ",t.name]}),Object(Z.jsx)("span",{children:Object(Z.jsxs)("span",{children:[t.comments.length," comments"]})}),Object(Z.jsxs)("strong",{children:[t.price," $"]}),Object(Z.jsxs)("span",{children:["quantity - ",t.quantity]})]}),Object(Z.jsxs)(nt,{children:[i.some((function(e){return e._id===t._id}))?Object(Z.jsx)(N.b,{onClick:function(e){return e.stopPropagation()},to:"/cart",children:Object(Z.jsx)(P,{children:"already in cart"})}):Object(Z.jsx)(ct,{onClick:function(e){return function(e,t){e.stopPropagation(),n(qe(t))}(e,Object(Ee.a)(Object(Ee.a)({},t),{},{totalItemPrice:0,count:0}))},children:Object(Z.jsx)("img",{src:jt,alt:"cart"})}),Object(Z.jsxs)(it,{active:c&&t.likes.includes(c._id),onClick:function(e){var r,i;e.stopPropagation(),c&&(t.likes.includes(c._id)?n(function(e,t){return function(){var n=Object(oe.a)(ae.a.mark((function n(r){var i;return ae.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,B.a.post("http://localhost:5000/api/products/unlike",{userId:e,productId:t});case 3:i=n.sent,r({type:Je.REMOVE_LIKE,payload:{likes:i.data,productId:t}}),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),alert(n.t0.response.data.message);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}()}(c._id,t._id)):n((r=c._id,i=t._id,function(){var e=Object(oe.a)(ae.a.mark((function e(t){return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B.a.post("http://localhost:5000/api/products/like",{userId:r,productId:i});case 3:if(e.sent.data){e.next=6;break}return e.abrupt("return");case 6:t({type:Je.SET_LIKE,payload:{userId:r,productId:i}}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),alert(e.t0.response.data.message);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}())))},children:[t.likes.length,Object(Z.jsx)("img",{src:bt,alt:"like"})]})]})]})},ht=_.b.div(ot||(ot=Object(k.a)(["\n    width: 750px;\n    height: 30px;\n    background-color: #fff;\n    display: flex;\n    margin: auto auto 0 auto;\n    background-color: transparent;\n    border: 1px solid #fff;\n    border-radius: 10px;\n    ul {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        width: 100%;\n        height: 100%;\n        list-style: none;\n        position: relative;\n    }\n"]))),Ot=_.b.li(st||(st=Object(k.a)(["\n    height: 100%;\n    padding: 5px 0px;\n    width: 50px;\n    text-align: center;\n    border-radius: 10px;\n        &:hover {\n            cursor:pointer;\n            background-color: #fff;\n        }\n"]))),ft=_.b.button(lt||(lt=Object(k.a)(["\n        width: 100px;\n        background-color: transparent;\n        outline: none;\n        cursor: pointer;\n        border-radius: 10px;\n        border: 1px solid #fff;\n  \n        &:hover {\n            border: 1px solid lightgrey;\n            background-color: #fff;\n        }\n"]))),gt=_.b.button(ut||(ut=Object(k.a)(["\n        width: 100px;\n        background-color: transparent;\n        outline: none;\n        cursor: pointer;\n        border: 1px solid #fff;\n        border-radius: 10px;\n        &:hover {\n            border: 1px solid lightgrey;\n            background-color: #fff;\n        }\n"]))),mt=function(e){for(var t=e.setPage,n=e.page,r=q((function(e){return e.products})).total,i=Object(v.useState)(0),c=Object(V.a)(i,2),a=c[0],o=c[1],s=Object(v.useState)(10),l=Object(V.a)(s,2),u=l[0],d=l[1],p=[],b=0;b<Math.ceil(r/8);b++)p.push(b+1);return Object(Z.jsxs)(ht,{children:[Object(Z.jsx)(gt,{onClick:function(){0!==a&&(d((function(e){return e-10})),o((function(e){return e-10})))},children:"prev"}),Object(Z.jsx)("ul",{children:p.slice(a,u).map((function(e,r){return Object(Z.jsx)(Ot,{style:{border:"".concat(e===n?"1px solid #fff":"")},onClick:function(){return t(e)},children:e},r)}))}),Object(Z.jsx)(ft,{onClick:function(){u<p.length&&(d((function(e){return e+10})),o((function(e){return e+10})))},children:"next"})]})},vt=function(){var e=q((function(e){return e.products})),t=e.products,n=e.error,r=e.loading,i=Object(v.useState)(1),c=Object(V.a)(i,2),a=c[0],o=c[1],s=Object(H.b)();return Object(v.useEffect)((function(){s(function(e){return function(){var t=Object(oe.a)(ae.a.mark((function t(n){var r;return ae.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:Je.FETCH_PRODUCTS}),t.next=4,B.a.get("http://localhost:5000/api/products?page=".concat(e));case 4:r=t.sent,setTimeout((function(){n({type:Je.FETCH_SUCCESS,payload:r.data})}),500),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),n({type:Je.FETCH_ERROR,payload:"\u0447\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a"});case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}()}(a))}),[a]),n?Object(Z.jsx)("h1",{children:"\u0447\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a"}):Object(Z.jsxs)(Z.Fragment,{children:[Object(Z.jsx)(et,{children:r?Array(8).fill(null).map((function(e,t){return Object(Z.jsx)("div",{style:{margin:"0px 15px 10px 0px"},children:Object(Z.jsx)(pt,{})},t)})):t.map((function(e){return Object(Z.jsx)(xt,{product:e},e._id)}))}),Object(Z.jsx)(mt,{page:a,setPage:o})]})},yt=function(){return Object(Z.jsx)(Z.Fragment,{children:Object(Z.jsx)(vt,{})})},wt=function(){var e,t=Object(v.useState)(null),n=Object(V.a)(t,2),r=n[0],i=n[1],c=q((function(e){return e.auth})).currentUser,a=q((function(e){return e.cart})).items,o=Ce(""),s=Object(H.b)(),l=Object($.h)().id;Object(v.useEffect)((function(){B.a.get("http://localhost:5000/api/products/".concat(l)).then((function(e){var t=e.data;i(t)}))}),[]);var u=function(e){c&&r&&s(function(e,t,n){return Object(oe.a)(ae.a.mark((function r(){var i;return ae.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,B.a.delete("http://localhost:5000/api/products/comment/".concat(e));case 3:i=r.sent,t(Object(Ee.a)(Object(Ee.a)({},n),{},{comments:n.comments.filter((function(e){return e._id!==i.data.commentId}))})),r.next=10;break;case 7:r.prev=7,r.t0=r.catch(0),alert(r.t0.response.data.message);case 10:case"end":return r.stop()}}),r,null,[[0,7]])})))}(e,i,r))};return Object(Z.jsxs)(Z.Fragment,{children:[Object(Z.jsxs)("div",{style:{display:"flex"},children:[Object(Z.jsx)("img",{style:{maxWidth:"450px"},src:r?"http://localhost:5000/"+r.image:void 0,alt:"image"}),Object(Z.jsxs)("div",{style:{alignSelf:"center"},children:[Object(Z.jsx)("h3",{children:r&&r.name}),Object(Z.jsx)("p",{children:"Lorem ipsum dolor sit amet consectetur adipisicing elit. Voluptate assumenda numquam minus ratione at a perferendis dolor iusto id, exercitationem beatae? Voluptate distinctio autem placeat aperiam excepturi cum quod reprehenderit doloremque blanditiis provident, illo inventore accusantium dolorum a dolor dolores similique aliquam ex eveniet vel! Ratione repellat, voluptatibus, consectetur ducimus ea illum unde laudantium facere praesentium fugiat iusto aspernatur veritatis labore distinctio at eveniet! Quia possimus ducimus eligendi voluptatibus consequatur voluptatem ullam officia facilis doloremque deleniti autem ad maxime perspiciatis mollitia eveniet fuga dolor non, quibusdam laudantium expedita esse tempore temporibus harum velit. Officia odit eaque molestias quod esse velit?"}),r&&a.some((function(e){return e._id===r._id}))?Object(Z.jsx)(N.b,{onClick:function(e){return e.stopPropagation()},to:"/cart",children:Object(Z.jsx)(P,{children:"already in cart"})}):Object(Z.jsx)(U,{onClick:function(){return r&&(e=Object(Ee.a)(Object(Ee.a)({},r),{},{totalItemPrice:0,count:0}),void s(qe(e)));var e},children:"\u0412 \u043a\u043e\u0440\u0437\u0438\u043d\u0443"})]})]}),Object(Z.jsxs)("div",{children:[Object(Z.jsxs)("div",{style:{marginBottom:"10px",width:"50%"},children:[Object(Z.jsx)("h1",{children:"Comments"}),Object(Z.jsx)("textarea",Object(Ee.a)(Object(Ee.a)({},o),{},{placeholder:"Leave a comment",style:{width:"100%",resize:"none",padding:"5px 5px"},name:"comment",rows:5})),Object(Z.jsx)(U,{style:{marginLeft:"auto"},onClick:function(){if(c&&r){var e={username:c.username,comment:o.value,product:r._id,user:c._id};s(function(e,t,n){return function(){var r=Object(oe.a)(ae.a.mark((function r(i){var c;return ae.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,B.a.post("http://localhost:5000/api/products/comment",e);case 3:c=r.sent,i({type:Je.ADD_COMMENT,payload:e}),t(Object(Ee.a)(Object(Ee.a)({},n),{},{comments:[c.data].concat(Object(at.a)(n.comments))})),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(0),alert(r.t0.response.data.message);case 11:case"end":return r.stop()}}),r,null,[[0,8]])})));return function(e){return r.apply(this,arguments)}}()}(e,i,r))}},children:"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"})]}),Object(Z.jsx)("div",{style:{overflowY:"auto",maxHeight:"200px"},children:Object(Z.jsx)("ul",{children:null===r||void 0===r||null===(e=r.comments)||void 0===e?void 0:e.map((function(e){return c&&e.user===c._id?Object(Z.jsxs)("li",{style:{border:"1px solid #fff",display:"flex",alignItems:"center",maxWidth:"70%",borderRadius:"10px",padding:"5px",justifyContent:"space-between"},children:[Object(Z.jsxs)("div",{children:[Object(Z.jsx)("h3",{children:e.username}),Object(Z.jsx)("p",{children:e.comment})]}),Object(Z.jsx)(U,{onClick:function(){return u(e._id)},style:{width:"25px",height:"25px",display:"inline-block",padding:"0"},children:"X"})]},e._id):Object(Z.jsx)("li",{children:Object(Z.jsxs)("div",{style:{border:"1px solid #fff",maxWidth:"70%",borderRadius:"10px",padding:"5px"},children:[Object(Z.jsx)("h3",{children:e.username}),e.comment]})},e._id)}))})})]})]})},kt=function(){var e=Ce(""),t=Ce(""),n=Ce(""),r=Object(H.b)(),i=q((function(e){return e.auth})).isAuth,c=function(){var i=Object(oe.a)(ae.a.mark((function i(c){var a;return ae.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(c.preventDefault(),e.value&&t.value&&n.value){i.next=4;break}return alert("all fields are required"),i.abrupt("return");case 4:a={username:e.value,email:t.value,password:n.value},r(ve(a));case 6:case"end":return i.stop()}}),i)})));return function(e){return i.apply(this,arguments)}}();return i?Object(Z.jsx)($.a,{to:"/"}):Object(Z.jsxs)(Te,{children:[Object(Z.jsx)("h1",{children:"Register"}),Object(Z.jsxs)(Re,{onSubmit:c,children:[Object(Z.jsx)("label",{htmlFor:"username",children:"Username"}),Object(Z.jsx)("input",Object(Ee.a)(Object(Ee.a)({},e),{},{name:"username",id:"username",type:"text"})),Object(Z.jsx)("label",{htmlFor:"email",children:"Email"}),Object(Z.jsx)("input",Object(Ee.a)(Object(Ee.a)({},t),{},{name:"email",id:"email",type:"text"})),Object(Z.jsx)("label",{htmlFor:"password",children:"Password"}),Object(Z.jsx)("input",Object(Ee.a)(Object(Ee.a)({},n),{},{name:"password",id:"password",type:"text"})),Object(Z.jsx)("input",{type:"submit",value:"Register"})]})]})},_t=function(){var e=q((function(e){return e.auth})),t=e.currentUser;e.isAuth;return Object(Z.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(Z.jsx)("h1",{children:null===t||void 0===t?void 0:t.username}),Object(Z.jsx)("h1",{children:null===t||void 0===t?void 0:t.email})]})};var Et=function(){var e=Object(H.b)();return Object(v.useEffect)((function(){e(function(){var e=Object(oe.a)(ae.a.mark((function e(t){var n,r;return ae.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B.a.get("http://localhost:5000/api/auth/checkToken",{headers:{Authorization:"Bearer ".concat(localStorage.getItem("access_token"))}});case 3:n=e.sent,r=n.data,t(me(r)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.response.data.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}())}),[]),Object(Z.jsxs)(N.a,{children:[Object(Z.jsx)(we,{}),Object(Z.jsxs)(A,{children:[Object(Z.jsx)(_e,{}),Object(Z.jsx)(D,{children:Object(Z.jsxs)($.d,{children:[Object(Z.jsx)($.b,{path:"/login",render:function(){return Object(Z.jsx)(Se,{})}}),Object(Z.jsx)($.b,{path:"/register",render:function(){return Object(Z.jsx)(kt,{})}}),Object(Z.jsx)($.b,{path:"/products/:id",render:function(){return Object(Z.jsx)(wt,{})}}),Object(Z.jsx)($.b,{path:"/products",render:function(){return Object(Z.jsx)(yt,{})}}),Object(Z.jsx)($.b,{exact:!0,path:"/",render:function(){return Object(Z.jsx)(Ie,{})}}),Object(Z.jsx)($.b,{path:"/cart",render:function(){return Object(Z.jsx)(Ze,{})}}),Object(Z.jsx)($.b,{path:"/profile",render:function(){return Object(Z.jsx)(_t,{})}})]})})]}),Object(Z.jsx)(I,{})]})},Ct=n(18),Tt={products:[],loading:!1,error:"",total:0},Rt={items:[],totalCartPrice:0},St={currentUser:null,isAuth:null},It=Object(Ct.combineReducers)({products:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Tt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Je.FETCH_PRODUCTS:return Object(Ee.a)(Object(Ee.a)({},e),{},{loading:!0});case Je.FETCH_SUCCESS:return Object(Ee.a)(Object(Ee.a)({},e),{},{loading:!1,products:t.payload.paginatedProducts,total:t.payload.total});case Je.FETCH_ERROR:return Object(Ee.a)(Object(Ee.a)({},e),{},{loading:!1,error:t.payload});case Je.SET_LIKE:return Object(Ee.a)(Object(Ee.a)({},e),{},{products:e.products.map((function(e){return e._id===t.payload.productId?Object(Ee.a)(Object(Ee.a)({},e),{},{likes:[].concat(Object(at.a)(e.likes),[t.payload.userId])}):e}))});case Je.REMOVE_LIKE:return Object(Ee.a)(Object(Ee.a)({},e),{},{products:e.products.map((function(e){return e._id===t.payload.productId?Object(Ee.a)(Object(Ee.a)({},e),{},{likes:t.payload.likes}):e}))});case Je.ADD_COMMENT:return Object(Ee.a)(Object(Ee.a)({},e),{},{products:e.products.map((function(e){return e._id===t.payload.productId?Object(Ee.a)(Object(Ee.a)({},e),{},{comments:[].concat(Object(at.a)(e.comments),[t.payload])}):e}))});default:return e}},cart:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ge.ADD_TO_CART:return Object(Ee.a)(Object(Ee.a)({},e),{},{totalCartPrice:e.totalCartPrice+t.payload.price,items:[].concat(Object(at.a)(e.items),[Object(Ee.a)(Object(Ee.a)({},t.payload),{},{count:1,totalItemPrice:t.payload.price})])});case ge.HANDLE_AMOUNT_COUNT:var n=e.items.map((function(e){return e._id===t.payload.item._id?Object(Ee.a)(Object(Ee.a)({},e),{},{count:t.payload.amount,totalItemPrice:t.payload.amount*e.price}):e}));return Object(Ee.a)(Object(Ee.a)({},e),{},{totalCartPrice:n.reduce((function(e,t){return e+t.totalItemPrice}),0),items:n});case ge.DELETE_FROM_CART:return Object(Ee.a)(Object(Ee.a)({},e),{},{totalCartPrice:e.totalCartPrice-t.payload.totalItemPrice,items:e.items.filter((function(e){return e._id!==t.payload._id}))});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:St,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m.SET_USER:return Object(Ee.a)(Object(Ee.a)({},e),{},{isAuth:!0,currentUser:t.payload});case m.LOGOUT:return localStorage.removeItem("access_token"),Object(Ee.a)(Object(Ee.a)({},e),{},{currentUser:null,isAuth:!1});default:return e}}}),Dt=n(47),At=n(48),Ut=Object(Ct.createStore)(It,Object(At.composeWithDevTools)(Object(Ct.applyMiddleware)(Dt.a)));w.a.render(Object(Z.jsx)(H.a,{store:Ut,children:Object(Z.jsx)(Et,{})}),document.getElementById("root"))}},[[77,1,2]]]);
//# sourceMappingURL=main.7a7983f9.chunk.js.map